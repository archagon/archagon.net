<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>iPad Pro + Pencil Slow Motion Bug</title>
    <meta name="description" content="Archagon was here... or was he? Yes, he was. This is Alexei Baboulevitch's personal blog webspacehomepage, featuring writing on software development, travel, photography, and more.
">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://beta-blog.archagon.net/2015/12/05/ipad-pro-plus-pencil-slow-motion-bug/">
</head>

  <style>
  /* dynamically assigns category colors */
  #sel_20160205composers-sketchpad {
  background-color: #f0f0ed; }
  #sel_20160205composers-sketchpad .post-title {
    /*color: mix($category-default-color, black, 60%);*/
    background-color: #d8d8cf; }

#sel_20151226the-perfect-travel-gaiwan {
  background-color: #f0f0ed; }
  #sel_20151226the-perfect-travel-gaiwan .post-title {
    /*color: mix($category-default-color, black, 60%);*/
    background-color: #d8d8cf; }

#sel_20151225the-stanley-64oz-classic-vacuum-growler {
  background-color: #f0f0ed; }
  #sel_20151225the-stanley-64oz-classic-vacuum-growler .post-title {
    /*color: mix($category-default-color, black, 60%);*/
    background-color: #d8d8cf; }

#sel_20151205ipad-pro-plus-pencil-slow-motion-bug {
  background-color: #f5e4e3; }
  #sel_20151205ipad-pro-plus-pencil-slow-motion-bug .post-title {
    /*color: mix($category-programming-color, black, 60%);*/
    background-color: #e4b7b6; }

#sel_20150929backgroundifier {
  background-color: #f4fbff; }
  #sel_20150929backgroundifier .post-title {
    /*color: mix($category-releases-color, black, 60%);*/
    background-color: #e3f6ff; }

#sel_20150909the-klean-kanteen-32oz-insulated-stainless-steel-growler-with-swing-lok-cap {
  background-color: #f0f0ed; }
  #sel_20150909the-klean-kanteen-32oz-insulated-stainless-steel-growler-with-swing-lok-cap .post-title {
    /*color: mix($category-default-color, black, 60%);*/
    background-color: #d8d8cf; }

#sel_20150308who-cares-about-the-apple-watch-edition {
  background-color: #ffe8c7; }
  #sel_20150308who-cares-about-the-apple-watch-edition .post-title {
    /*color: mix($category-technology-color, black, 60%);*/
    background-color: #ffc26b; }

#sel_20150201vancouver {
  background-color: #fefedf; }
  #sel_20150201vancouver .post-title {
    /*color: mix($category-travel-color, black, 60%);*/
    background-color: #fdfdab; }

#sel_20150131state_of_the_union {
  background-color: #f0f0ed; }
  #sel_20150131state_of_the_union .post-title {
    /*color: mix($category-default-color, black, 60%);*/
    background-color: #d8d8cf; }

#sel_20141119whats_up_with_google_maps_these_days {
  background-color: #ffe8c7; }
  #sel_20141119whats_up_with_google_maps_these_days .post-title {
    /*color: mix($category-technology-color, black, 60%);*/
    background-color: #ffc26b; }

#sel_20141108the-trials-and-tribulations-of-writing-a-3rd-party-ios-keyboard {
  background-color: #f5e4e3; }
  #sel_20141108the-trials-and-tribulations-of-writing-a-3rd-party-ios-keyboard .post-title {
    /*color: mix($category-programming-color, black, 60%);*/
    background-color: #e4b7b6; }

#sel_20140918old_iphone_tricks_gps_tracker {
  background-color: #fefedf; }
  #sel_20140918old_iphone_tricks_gps_tracker .post-title {
    /*color: mix($category-travel-color, black, 60%);*/
    background-color: #fdfdab; }

#sel_20130828gathering-the-goods-part-2 {
  background-color: #fefedf; }
  #sel_20130828gathering-the-goods-part-2 .post-title {
    /*color: mix($category-travel-color, black, 60%);*/
    background-color: #fdfdab; }

  </style>
  <body>
    <div class="body-wrapper">
    <header class="site-header">
    <div class="wrapper">
        <div class="background-overlay">
            <header class="site-title">
                <a href="/"><div class="title"><span class="name">Archagon</span> Was Here</div><div class="subtitle">Jekyll Test</div></a>
            </header>

            <nav class="site-nav">
            <a class="page-link" href="/">Home</a>
            
                
                <a class="page-link" href="/about/">About</a>
                
            
                
                <a class="page-link" href="/archive/">Archive</a>
                
            
                
            
                
            
                
            
                
                <a class="page-link" href="/timeline/">Travel Timeline</a>
                
            
            </nav>
        </div>
    </div>
</header>
    <div class="page-content">
      <div class="wrapper">
        <div class="post" id="sel_20151205ipad-pro-plus-pencil-slow-motion-bug">
  <header class="post-header">
    <h1 class="post-title">iPad Pro + Pencil Slow Motion Bug</h1>
    <!-- <p class="post-meta">Dec 5, 2015</p> -->
  </header>

  <article class="post-content">
    <p>I noticed an interesting problem with the Apple Pencil while developing my app. It seems that if you’re using the Pencil while simultaneously using a gesture recognizer (as, for instance, in a scroll view), touch processing goes into slow motion. (Approximately half-speed, according to some quick measurements.) Seems there’s some sort of interference between Pencil and gesture event processing. Notably, the framerate remains stable while this is happening.</p>

<p><iframe class="youtube" width="800" height="450" src="https://www.youtube.com/embed/ioPRiHBj8l4" frameborder="0" allowfullscreen=""></iframe></p>

<p>I noticed that the Paper app also has this problem. Other drawing apps seem to avoid it (accidentally or intentionally) by disabling canvas navigation while drawing. In Procreate, you can adjust the brush sliders while drawing without any slow motion, but I think this has to do with the fact that Procreate uses a custom OpenGL-based implementation for their widgets, not UIGestureRecognizer.</p>

<p>I can reproduce this bug in Apple’s TouchCanvas demo by sticking a scroll view to the left of the screen and continuously scrolling it while drawing. At first, it behaves correctly. But when the CPU usage hits a high enough level, you get the behavior described above. If you do the drawing with your finger, the problem disappears. The framerate does drop, but the touches don’t continue when you lift your finger; they simply get delivered with less frequency, and the scroll view stops scrolling immediately once you lift your finger.</p>

<p>My hunch is that the sampling frequency of the Pencil messes up the usual touch handling behavior when under load. That would explain the 2x factor: the Pencil has a 240Hz refresh rate while touches normally get sampled at 120Hz.</p>

<p>Regardless of whether this is an iOS bug or something I messed up on my end, I’d love to know if there’s a way to fix this! Simultaneously scrolling with your hand while drawing with the Pencil should be a given.</p>

    <div class="signature">
    <p>—<span class="signature-name">Archagon</span></p>
    <p>December 5, 2015</p>
</div>
  </article>
</div>

      </div>
    </div>
    <footer class="site-footer">
  <div class="wrapper">
    <ul class="background-overlay">
      <!-- rss link -->
      <li class="rss">
        <a href="/feed.xml">
          <div>
            <img src="/images/RSS.svg" />
            <span>Subscribe via RSS</span>
          </div>
        </a>
      </li>

      <!-- twitter link -->
      <li class="twitter">
        <a href="https://twitter.com/archagon">
          <div>
            <svg viewBox="0 0 16 16">
              <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
              c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
            </svg>
            <span>Tweet me up</span>
          </div>
        </a>
      </li>
    </ul>
  </div>
  </a>
</footer>

    </div>
  </body>
</html>
<script>
var elems = document.querySelectorAll('.background-overlay');

var setHeaderImageOffset = function() {
  for (var i = 0; i < elems.length; i++) {
    var elem = elems[i];
    var positionString = '' + -elem.offsetLeft + 'px ' + -elem.offsetTop + 'px';
    elem.style['background-position'] = positionString;
  }
};

setHeaderImageOffset();
window.onresize = setHeaderImageOffset;
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-44612590-2', 'auto');
  ga('send', 'pageview');

</script>