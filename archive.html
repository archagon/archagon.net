---
layout: default
---

<div class="home">
  <h1 class="page-heading">Archive</h1>

  <p>
    <!-- This is a little bonkers, coming in at O(N^3), but it's simple and more understandable
    than the alternatives. If performance becomes an issue I will revisit. -->

    <!-- Better way: 1. filter by category, 2. filter by year, 3. filter by month. -->

    {% for year_check in site.posts %}
      {% capture year_check_year %}{{ year_check.date | date: "%Y" }}{% endcapture %}

      {% if year_check_year != year %}
        {% capture year %}{{ year_check_year }}{% endcapture %}

        <h2>{{ year }}</h2>
        <ul>
          {% for month_check in site.posts %}
            {% capture month_check_year %}{{ month_check.date | date: "%Y" }}{% endcapture %}
            {% capture month_check_month %}{{ month_check.date | date: "%B" }}{% endcapture %}

            {% if month_check_year == year %}
              {% if month_check_month != month %}
                {% capture month %}{{ month_check_month }}{% endcapture %}

                <h3>{{ month }}</h3>
                <ul>
                  {%for post in site.posts %}
                    {% capture post_year %}{{ post.date | date: "%Y" }}{% endcapture %}
                    {% capture post_month %}{{ post.date | date: "%B" }}{% endcapture %}

                    {% if year == post_year %}
                      {% if month == post_month %}

                        <li>
                          <a href="{{ post.url }}">{{ post.title }}</a> ({{ post.categories }}) â€” <small>{{ post.excerpt | strip_html | truncatewords: 10 }}</small>
                        </li>

                      {% endif %}
                    {% endif %}
                  {% endfor %}
                </ul>

              {% endif %}
            {% endif %}
          {% endfor %}
        </ul>

      {% endif %}
    {% endfor %}
  </p>

<!--   <ul class="post-list">
    {% for post in site.posts %}
      <li>
        <span class="post-meta">{{ post.date | date: "%b %-d, %Y" }} </span>

        <h3>
        <a class="post-archive-link" href="{{ post.url | prepend: site.baseurl }}">{{ post.title }}</a>
        </h3>
      </li>
    {% endfor %}
  </ul> -->

</div>
